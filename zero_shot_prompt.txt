// Utility: convert text to snake_case (JavaScript)
// Usage: toSnakeCase("HelloWorld") -> "hello_world"
function toSnakeCase(input) {
	if (input == null) return '';
	const str = String(input);
	return str
		// Insert space between camelCase boundaries: "helloWorld" -> "hello World"
		.replace(/([a-z0-9])([A-Z])/g, '$1 $2')
		// Replace non-alphanumeric separators (dash, underscore, dot) with space
		.replace(/[\-\._]+/g, ' ')
		// Remove characters that are not letters, numbers or spaces
		.replace(/[^A-Za-z0-9 ]+/g, '')
		.trim()
		.toLowerCase()
		// Collapse any internal whitespace to single underscore
		.split(/\s+/)
		.filter(Boolean)
		.join('_');
}

// Examples:
// toSnakeCase("Hello World!") -> "hello_world"
// toSnakeCase("some-mixed_stringExample") -> "some_mixed_string_example"
// toSnakeCase("  already_snake_case  ") -> "already_snake_case"
